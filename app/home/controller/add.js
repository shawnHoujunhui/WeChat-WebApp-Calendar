/**
 * Created by shawn on 24/05/2016.
 */
//
// Autogenerated by Thrift Compiler (0.9.0)
//
// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
//
'use strict';

var Base = require('./base.js');
var thrift = require('thrift');

//noinspection ES6Validation
module.exports = think.controller(Base, {
    addAction:function(self){
        var id = self.get('activityid');
        this.session("userid").then(function(userid){
            self.model("activity_rel_people").add({userid:userid,activityid:id}).then(function(insertId){
                if(insertId != undefined){
                    self.redirect('/desc/index?activityid='+id);
                }
                else{
                    self.json({'msg':'添加失败'});
                }
            });
        });
    },
    removeAction:function(self){
        var id = self.get('activityid');
        this.session("userid").then(function(userid){
            self.model("activity_rel_people").where({userid:userid,activityid:id}).delete().then(function(){
                self.redirect('/desc/index?activityid='+id);
            });
        });
    }
});